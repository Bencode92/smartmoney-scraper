<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üè¶ Institutional Tracker - SmartMoney Scraper</title>
    <style>
        :root {
            --bg-primary: #050816;
            --bg-secondary: #020617;
            --border: #1f2937;
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --accent-blue: #2563eb;
            --accent-green: #16a34a;
            --accent-orange: #f97316;
            --accent-red: #ef4444;
        }
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }
        .header {
            margin-bottom: 20px;
        }
        .header h1 {
            margin: 0 0 4px;
            font-size: 26px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .header p {
            margin: 0 0 16px;
            color: var(--text-secondary);
        }
        .badge {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 9999px;
            background: var(--accent-blue);
            color: white;
        }

        /* Controls */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }
        .btn {
            border: none;
            border-radius: 9999px;
            padding: 10px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: opacity 0.2s, transform 0.1s;
        }
        .btn:hover { opacity: 0.9; }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: var(--accent-blue); color: white; }
        .btn-success { background: var(--accent-green); color: white; }
        .btn-warning { background: var(--accent-orange); color: white; }
        .btn-danger { background: var(--accent-red); color: white; }
        .btn-github { background: #333; color: white; }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 14px;
            border: 1px solid var(--border);
        }
        .stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .stat-value {
            font-size: 22px;
            font-weight: 600;
            margin-top: 4px;
        }
        .stat-value.positive { color: #10b981; }
        .stat-value.negative { color: #ef4444; }

        /* Grid Layout */
        .grid {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 16px;
            margin-top: 12px;
        }
        @media (max-width: 900px) {
            .grid { grid-template-columns: 1fr; }
        }

        /* Panels */
        .panel {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--border);
        }
        .panel h2 {
            margin: 0 0 12px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        textarea {
            width: 100%;
            min-height: 400px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 12px;
            font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
            font-size: 12px;
            resize: vertical;
        }
        textarea:focus {
            outline: none;
            border-color: var(--accent-blue);
        }
        pre {
            margin: 0;
            max-height: 400px;
            overflow: auto;
            background: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border);
            padding: 12px;
            font-size: 11px;
            white-space: pre-wrap;
            word-break: break-word;
            color: #a5f3fc;
        }
        .hint {
            margin-top: 8px;
            font-size: 11px;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        .hint strong { color: var(--text-primary); }

        /* Table */
        .table-panel {
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }
        thead {
            background: #111827;
            position: sticky;
            top: 0;
        }
        th, td {
            padding: 8px 10px;
            border-bottom: 1px solid var(--border);
            text-align: left;
        }
        th {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 11px;
            text-transform: uppercase;
        }
        tr:hover td {
            background: rgba(37, 99, 235, 0.1);
        }
        .ticker-link {
            color: #60a5fa;
            text-decoration: none;
            font-weight: 600;
        }
        .ticker-link:hover {
            text-decoration: underline;
        }
        .table-scroll {
            max-height: 500px;
            overflow-y: auto;
        }

        /* GitHub Status */
        .github-status {
            margin-top: 12px;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 13px;
            display: none;
        }
        .github-status.pending { display: block; background: #1e3a5f; color: #93c5fd; }
        .github-status.success { display: block; background: #14532d; color: #86efac; }
        .github-status.error { display: block; background: #7f1d1d; color: #fca5a5; }
        .github-status a { color: inherit; }

        /* Progress */
        .progress-container {
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            margin-bottom: 16px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>
            üè¶ Institutional Tracker
            <span class="badge">SmartMoney Scraper</span>
        </h1>
        <p>Collecte les <strong>Top 100 stocks owned by hedge funds</strong> et g√©n√®re un JSON exploitable.</p>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="parseInstitutionalText()">
                <span>üì•</span> Parser
            </button>
            <button class="btn btn-success" onclick="downloadInstitutionalJSON()">
                <span>üíæ</span> Download JSON
            </button>
            <button class="btn btn-github" onclick="pushToGitHub()">
                <span>üöÄ</span> Push to GitHub
            </button>
            <button class="btn btn-warning" onclick="loadFromLocalStorage()">
                <span>üìÇ</span> Charger sauvegarde
            </button>
            <button class="btn btn-danger" onclick="clearInstitutionalAll()">
                <span>üóëÔ∏è</span> Clear
            </button>
        </div>

        <div class="stats-grid" id="statsSection">
            <div class="stat-card">
                <div class="stat-label">Tickers Pars√©s</div>
                <div class="stat-value" id="statTickers">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Value Owned</div>
                <div class="stat-value" id="statTotalValue">$0B</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Avg # Holders</div>
                <div class="stat-value" id="statAvgHolders">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Top Sector</div>
                <div class="stat-value" id="statTopSector">‚Äî</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Large Stakes Total</div>
                <div class="stat-value" id="statLargeStakes">0</div>
            </div>
        </div>
    </div>

    <div class="grid">
        <div class="panel">
            <h2>üìã Copier-Coller Institutional Data</h2>
            <textarea id="inst-paste" placeholder="Colle ici le tableau depuis la page 'Top 100 stocks owned by hedge funds'

Format attendu (vertical) :
NVDA
NVIDIA Corporation
1374    659    565
$ 2.73T
Technology
$86,62
$212,19

üí° La colonne 52W Range est ignor√©e automatiquement."></textarea>
            <div class="hint">
                <strong>üí° Astuce :</strong> S√©lectionne tout le tableau (Ctrl+A) puis Ctrl+C ‚Üí colle ici.<br>
                <strong>üìå Format :</strong> Ticker ‚Üí Company ‚Üí Stats (3 colonnes) ‚Üí Value ‚Üí Sector ‚Üí [52W ignor√©]
            </div>
        </div>

        <div class="panel">
            <h2>üßæ Pr√©visualisation JSON</h2>
            <pre id="json-preview">// Le JSON appara√Ætra ici apr√®s parsing...</pre>
            <div id="github-status" class="github-status"></div>
        </div>
    </div>

    <div class="table-panel panel" id="tablePanel" hidden>
        <h2>üìä Top Stocks Pars√©s</h2>
        <div class="table-scroll">
            <table>
                <thead>
                <tr>
                    <th>#</th>
                    <th>Ticker</th>
                    <th>Company</th>
                    <th>Total Holders</th>
                    <th>Medium Stakes</th>
                    <th>Large Stakes</th>
                    <th>Value Owned</th>
                    <th>Sector</th>
                </tr>
                </thead>
                <tbody id="stocksBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script src="institutional_collector.js"></script>
</body>
</html>